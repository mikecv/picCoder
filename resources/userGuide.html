<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="./picCoder.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<a href="#Top">Home</a>
<a href="#Introduction">Introduction</a>
<a href="#ImageTypes">Image Types</a>
<a href="#OpeningImage">Opening an Image</a>
<a href="#PicCoderEncodedImages">picCoder Encoded Images</a>
<a href="#ExtractingFiles">Extracting Embedded Files</a>
<a href="#EmbeddedConversations">Embedded Conversations</a>
<a href="#StartingConversation">Starting a Conversation</a>
<a href="#AddingMessages">Adding Messages</a>
<a href="#EmbeddingConversation">Embedding a Conversation</a>
<a href="#ExportingConversation">Exporting a Conversation</a>
<a href="#EmbeddingFile">Embedding a File</a>
<a href="#PreviewingImage">Previewing Encoded Image</a>
<a href="#SavingImage">Saving Encoded Image</a>
<a href="#ConfigurationSettings">Configuration Settings</a>
<a href="#Logging">Logging</a>

<a id="Top"></a>
<h1>picCode User Guide</h1>

<a id="Introduction"></a>
<h2>Introduction</h2>

<p><i><b>picCoder</b></i> enables data to be embedded inside
  particular image files using a technique called <i><span style="font-weight: normal">Steganography</span></i><span style="font-style: normal">,
  which comes from Greek steganographia, which combines the words stegan√≥s meaning &quot;covered or concealed&quot;, and -graphia
  meaning &quot;writing&quot;. In the case of </span><i><b>picCoder</b></i><span style="font-style: normal">, data is concealed in variations of the colour of image pixels.</span></p>
  <br>
<p>The application is not new and makes no claims as to how secure or secret using it is.
  It is a novelty in that it demonstrates how information can be hidden in plain sight.</p>
<p>You could use it to house your secret information embedded in your computer wallpaper where no one would think of looking if they were searching your computer for secrets.
  The secret information is there in plain sight, if only you could see subtle variations in colour and be able to recognise patterns.
  Maybe the people that can hear music by looking at the groves on an LP record could see your secrets, but they would be the only ones.
</p>
  
<h3>Features</h3>

<p>Using </span><i><b>picCoder</b></i> you can embed data inside an image, share the image with someone else, and they can extract the embedded data,
  or you could use it to store passwords, PINs etc, instead of using other more conventional methods.</p>
<p>Embedded data can be any file with the size of the file only limited by the size of the image in which it is embedded.
  The application also supports a conversation function, where users can share the image containing the embedded conversation and pass messages to each other.</p>

<a id="ImageTypes"></a>
<h3>Image Types Supported</h3>
  
<p>The nature of the data embedding employed means that if images are graphically manipulated after they have been encoded picCoder encoding may be corrupted.
  For this reason presently only .png images are supported as they support lossless compression.</p>
<p>This initial release only supports 24bit PNG files; any alpha channel is ignored.</p>
  
<a id="OpeningImage"></a>
<h2>Opening an Image</h2>

<p>To open an image use the <font color="#2a6099"><i>Open Image</i></font> option from the <font color="#2a6099"><i>File</i></font> menu as
  illustrated below. Alternatively, drag and drop an accepted image file (.png) onto the application window.</p>
  <br>
  <br>  
  <img src="openFileMenu.png" alt="Open file menu">
  <br>  

<p>If an accepted image file type was selected the image will be displayed in the application window as illustrated below.</p>
  <br>
  <br>  
  <img src="openedImage.png" alt="Opened image">
  <br>

<p>In the previous illustration the image file opened has not been <i><b>picCoder</b></i>
  encoded, which is indicated by the black border around the image file path/name.
  See section <span style="background: #c0c0c0"><a href="#OpeningPicCoderImage">Opening Encoded Image</a></span> for opening a previously picCoder encoded image.</p>

<a id="PicCoderEncodedImages"></a>
<h3>picCoder Encoded Images</h3>

<p>When an image is opened, the application checks the image to see if it is </span><i><b>picCoder</b></i><span style="font-style: normal"> encoded.
  This is done be scanning the image data for preamble data that all </span><i><b>picCoder</span></b></i><span style="font-style: normal"> encoded images have.
  If the image contains </span><i><b>picCoder</span></b></i><span style="font-style: normal"> embedded data this will be indicated in the detail below the image as illustrated below.</span></p>
  <br>
  <br>  
  <img src="embeddedFile.png" alt="Opened image with embedded file">
  <br>  

<p>In the example above the image contains an embedded file, in this case called <font color="#2a6099"><i>kylie2.png</i></font>.
  Below the details of the embedded file is a button marked <font color="#2a6099"><i>Extract Embedded File</i></font> used to extract and save the embedded file.</p>
<p>See section <span style="background: #c0c0c0"><a href="#ExtractingFiles">Extracting Embedded Files</a></span> for how to extract embedded files,
  and section <span style="background: #c0c0c0"><a href="#EmbeddingFile">Embedded Files</a></span> for how to embed a file into an image.</p>

<p>In a similar way, if the image contained an embedded conversation there would be a button marked <font color="#2a6099"><i>Extract Embedded Conversation</i></font>
  used to extract and display the conversation as illustrated below.</p>
  <br>
  <br>  
  <img src="embeddedConversation.png" alt="Opened image with embedded conversation">
  <br>  

<p>Note that there are different coloured borders around the image file details for images with embedded files and embedded conversations.</p>
<p>See section <span style="background: #c0c0c0"><a href="#EmbeddedConversations">Embedded Conversations</a></span> which covers deailing with embedded conversations.</p>

<a id="ExtractingFiles"></a>
<h2>Extracting Embedded Files</h2>

<p>As per section <span style="background: #c0c0c0"><a href="#PicCoderEncodedImages">picCoder Encoded Images</a></span>
  if an image is embedded with a file there is a button marked <font color="#2a6099"><i>Extract Embedded File</i></font> below the image
  that is used to extract and save the embedded file.</p>

<p>Selecting the <font color="#2a6099"><i>Extract Embedded File</i></font> button will present a file selection dialog to select or enter
  a filename to save the extract file to (the default filename will be the name of the file that was embedded).</p>
<p>Note that if the file was embedded with a password a dialog will be presented for the user to enter the password;
  if the password entered is not correct the file selection dialog will not be presented and the embedded file will not be extracted or saved.
  Refer also to section section <span style="background: #c0c0c0"><a href="#EmbeddingFile">Embedding Files</a></span> which deals with
  embedding files with and without passwords.</p>

<p>Assuming that a filename to save the extract file to has been entered, extracting the file will commence; a progress bar will show the progress,
  and disappear when extraction is complete is complete.</p>

<p>If the extracted and saved file is an accepted image file (various formats) the application will display the image in a separate dialog
  as illustrated below.</p>
  <br>
  <br>  
  <img src="extractedImage.png" alt="Extracted Image">
  <br>  

  <p>If the extracted and saved file is not an accepted image file, i.e. any other file type, a pop-up as illustrate below will be displayed prompting
    the user to use an appropriate application to open the file.</p>
    <br>
    <br>  
    <img src="filePopup.png" alt="Unsupported file type pop-up">
    <br>  

<a id="EmbeddedConversations"></a>
<h2>Embedded Conversations</h2>

<a id="StartingConversation"></a>
<h3>Starting a New Conversation</h3>

<p>To start a new conversation open a supported image that you'll embed the conversation into,
  and then select <font color="#2a6099"><i>Start Conversation</i></font> from the <font color="#2a6099"><i>Edit</i></font> menu
  as illustrated below. Note that the menu item will not be available until an image file is opened.</p>
  <br>
  <br>  
  <img src="startConversation.png" alt="Start new conversation">
  <br>  

<p>This will display a empty <b>Conversation Editor</b> dialog as illustration below.</p>
  <br>
  <br>  
  <img src="newConversationDlg.png" alt="New conversation dialog">
  <br>  

<a id="AddingMessages"></a>
<h3>Adding Messages to a New Conversation</h3>

<p>The <b>Conversation Editor</b> dialog has an edit window at the bottom where a message can be edited,
  and a window above where committed messages are displayed.</p>

<p>The messaging editing window accepts rich text, so html tags can be used,
  although at this release this type of formatting must be done manually as illustration below.</p>
  <br>
  <br>  
  <img src="messageEntry.png" alt="Message entry">
  <br>  

<p>To commit a message select the <font color="#2a6099"><i>Tick</i></font> icon.
  To clear the edit window select the red <font color="#2a6099"><i>Cross</i></font> icon.
  If the time between messages is less than a configured period the messages are grouped icon.</p>
  <br>
  <br>  
  <img src="populatedMessage.png" alt="First populated message">
  <br>  

<p>As illustrated above the message is displayed in a bubble, and shows the author's name (or handle),
  the date and time of the message, and the message text it self.
  Notice the rendering of the <b>bold</b> rich text that was entered in the edit window.</p>

<p>Additional messages can be added in the same way.
  As each message is entered and committed they are rendered in the upper window as illustrated below.</p>
  <br>
  <br>  This bearly noticeable difference was expected as the application checks what percentage of the image colour information has been manipulated.
  In this case the embedded file was relatively small so the ratio of colour data manipulated was only 4.21 as can be seen in the logs as illustrated below
<p>As illustrated above, if the time between messages is less than a configured period the messages are grouped,
  and in this case only the first message in the group shows the author's handle and message timestamp.
  The time between messages for message grouping is specified in the configuration parameter <font color="#2a6099"><i>SameMsgTime</i></font>.</p>

<a id="EmbeddingConversation"></a>
<h3>Embedding the Conversation</h3>

<p>An option exists to add a password to the embeddeding of the conversation into an image.
  By default the configuration parameter <font color="#2a6099"><i>IncludePasswd</i></font> is used to specify this.
  This setting can be overriden from the <font color="#2a6099"><i>Edit</i></font> checkbox in the <font color="#2a6099"><i>Edit / Embed...</i></font> menu as illustrated below.
  Note that this setting will revert to the configuration setting next time the application is started.</p>
<p>Note also that there is only ever one (1) conversation available to be embedded into an image.</p>
  <br>
  <br>  
  <img src="embedWithPasswordMenu.png" alt="Embed with password checkbox">
  <br>  

<p>To embed the conversation into the image select <font color="#2a6099"><i>Embed Conversation</i></font> from the <font color="#2a6099"><i>Edit / Embed...</i></font> menu
  as illustrated below.</p>
  <br>
  <br>  
  <img src="embedConversation.png" alt="Embed conversation menu">
  <br>  

<p>If embedding with password is active a dialog will be presented for the user to specify the password to include in the encoded image as illustrated below.
  Note that a second dialog will be presented to confirm the password entry.</p>
  <br>
  <br>  
  <img src="passwordSet.png" alt="Embedding password">
  <br>  

<p>The only restrictions on passwords is length, i.e. passwords must be between 6 to 20 characters (inclusive).</p>

<p>If embedding with password is not active or a password has been set correctly, the conversation will be embedded into the current image.
  A progress bar dialog will show the progress of embedding the conversation, but as embedding of conversations is relatively quick, the the dialog may be short-lived.</p>

<p>At this point the image with embedded conversation can be saved and sent to the intended participant in the conversation.
  See section <span style="background: #c0c0c0"><a href="#SavingImage">Saving Encoded Image</a></span> for a description of saving an encoded image.
  Note that saving an encoded image is the same regardless of what type of data was stored in it.</p>

<p>If all goes to plan the recipiant of the image will extract the embedded conversation and see your messages</p>
<p><i></i>Note that if the original conversation was encodded with a password, all additions to the conversation <b>will</b> be encodded with a password as well,
  regadless of what the current embed with password setting.</i></p>
<p>If a password is encodded in the image a dialog will be presented for the user to enter the password as illustrated below.</p>
    <br>
    <br>  
    <img src="passwordEntry.png" alt="Conversation password entry">
    <br>  

<p>As applicable, assuming a password was entered correctly, the recipiant will see all the messages in the conversation.
  Note that on their view of the conversation your messages (basically any messages not by them) will be shown on the left side of the conversation window.</p>
  <br>
  <br>  
  <img src="populatedMessageReturn.png" alt="Recipiant's view of conversation">
  <br>  

<p>The recipiant can add their own messages by following the same process as above as illustrated below.</p>
  <br>
  <br>  
  <img src="populatedMessageResponse.png" alt="Recipiant's response messages">
  <br>  

<p>The conversation can to and from between users following the same process before. An example conversation is illustrated below.</p>
<br>
<br>  
<img src="populatedMessageAgain.png" alt="Conversation messages to and fro">
<br>  

<p>Note that the colours used for the message bubbles in the conversation will be different for each author in the conversation.
  Note also, that colours are chosen at random so will be different each time the application runs.</p>

<a id="ExportingConversation"></a>
<h3>Exporting a Conversation</h3>

<p>To export the conversation to a file select <font color="#2a6099"><i>Export Conversation</i></font> from the <font color="#2a6099"><i>File</i></font> menu
  as illustrated below.</p>
  <br>
  <br>  
  <img src="exportConversationMenu.png" alt="Export conversation menu">
  <br>  

<p>This will launch a file browser were the file to export the conversation to can be selected / entered.
  After the file to export the conversation to has been selected, exporting will commence.</p> 
<p>Note that if the conversation was embedded with a password a dialog will be presented for the user to enter the password;
  if the password entered is not correct the file selection dialog will not be presented and exporting the conversation will not be performed.</p>
<p>The export of the conversation will be a plain text file with a header and then the messages one after the other as illustrated below.</p> 
  <br>
  <br>  
  <img src="exportedConversation.png" alt="Exported conversation">
  <br>  

<a id="EmbeddingFile"></a>
<h2>Embedding a File</h2>

<p>As for embedding a conversation, an option exists to add a password to the embedding of a file into an image.
  Refer to section <span style="background: #c0c0c0"><a href="#EmbeddingConversation">Embedding the Conversation</a></span> for a description.</p>
<p>The difference with embedding files is that <b>only</b> the <font color="#2a6099"><i>Embed with Password</i></font> configuration setting is taken into account.</p>

<p>After opening an image to embed into, select <font color="#2a6099"><i>Embed File</i></font> from the <font color="#2a6099"><i>Edit / Embed...</i></font> menu
  as illustrated below. Note that this file can be of any type, including compressed folders, executables etc.</p>
  <br>
  <br>  
  <img src="embedFileMenu.png" alt="Embed file menu">
  <br>  

<p>This will launch a file browser were the file to embed can be selected.
  After the file to embed has been selected embedding will commence; a progress bar will show the progress as illustrated below,
  and disappear when embedding is complete.</p>
  <br>
  <br>  
  <img src="embeddingProgress.png" alt="Embedding progress bar">
  <br>  

<p>The image with embedded file can now be saved, but first it is worthwhile checking what the saved image will look like.
  This is because if too much data is embedded into the image the changes to the image colours inherent in the embedding process may be too noticeable.
  Refer to section <span style="background: #c0c0c0"><a href="#PreviewingImage">Previewing Image after Embedding</a></span> for a description.</p>

<p>Saving an image with embedded data is straight forward.
  Refer to section <span style="background: #c0c0c0"><a href="#SavingImage">Saving Image after Embedding</a></span> for a description.</p>

<a id="PreviewingImage"></a>
<h2>Previewing Encoded Image</h2>

<p>To preview the image after embedding data into it, select <font color="#2a6099"><i>Preview Image</i></font> from the <font color="#2a6099"><i>Edit</i></font> menu
  as illustrated below.</p>
  <br>
  <br>  
  <img src="previewImageMenu.png" alt="Preview image menu">
  <br>  

<p>This will present a dialog showing the starting raw image with the file embedded into it.
  If all is okay the difference should not be noticeable (unless you know what you are looking for.
  The starting raw image (left) and image with embedded file (right) are illustrated side by side below.</p>
  <br>
  <br>  
  <img src="imageCompareSame.png" alt="Preview image with no difference">
  <br>  

<p>This bearly noticeable difference was expected as the application checks what percentage of the image colour information has been manipulated.
  In this case the embedded file was relatively small so the ratio of colour data manipulated was only 4.21 as can be seen in the logs as illustrated below.</p>
  <br>
  <br>  
  <img src="embedRatioLow.png" alt="Embed ratio low">
  <br>  

<p>There is a configuration parameter <font color="#2a6099"><i>MaxEmbedRatio</i></font> that specifies the maximum ratio ( 0 to 1.0)
  to allow when embedding a file (or conversation). A typical maximum ratio is 0.5, but what is acceptable will depend a little on
  the data being embedded and the image the data is being embedded into.</p>
<p>If embedding the file will violate the embedding ratio a popup will be displayed as illustrated below,
  and embedding will not continue.</p>
  <br>
  <br>  
  <img src="exceedEmbedRatio.png" alt="Exceeding embedding ratio popup">
  <br>  
  
  <p>To illustrate the impact of embedding too large a file into an image the configuration parameter <font color="#2a6099"><i>MaxEmbedRatio</i></font>
  was set higher and a much larger file was embedded as can be seen in the log file where the embedding ratio was 56.961.</p>
  <br>
  <br>  
  <img src="embedRatioHigh.png" alt="Embed ratio high">
  <br>  

<p>The starting raw image (left) and image with the much larger embedded file (right) are illustrated side by side below.</p>
<p>The differences in the images is now noticeable, although the image with the embedded data just looks the same only poorer quality.</p>
  <br>
  <br>  
  <img src="imageCompareDiff.png" alt="Preview image with noticeable difference">
  <br>  

<p>The moral to the story is don't embed too much data into an image.
  If you need to embed more data you need a starting raw image with more pixels.
  Note that it the number of pixels and colour planes that matters and not the physical file size of the starting raw image.</p>

<a id="SavingImage"></a>
<h2>Saving Encoded Image</h2>

<p>Assuming that you have managed to embed a file or a conversation into an image,
  and you have reviewed the resultant image and deemed it acceptable, i.e. not noticeably distorted,
  it is time to save the image.</p>

<p>To save the image after embedding data into it, select <font color="#2a6099"><i>Save picCoded Image</i></font> from the <font color="#2a6099"><i>File</i></font> menu
  as illustrated below.</p>
  <br>
  <br>  
  <img src="savePiccodedImageMenu.png" alt="Save picCoded image menu">
  <br>

<p>This will present a file selection dialog where the filename of the picCoded image (.png) can be selected or entered.
  After the filename to save the picCoded image to has been selected / entered savinging will commence.
  This is relatively quick, so no progress bar is shown.</p>
  
<a id="ConfigurationSettings"></a>
<h2>Configuration Settings</h2>

<p>Application configuration exists in a file called <font color="#2a6099"><i>picCoder.json</i></font>.
  For the current release the configuration file can be edited by the user as required, or will be generated will default configuration if it does not exist.</p>
<p>Configuration data includes a configuration version specified by parameter <font color="#2a6099"><i>ConfigVersion</i></font>.
  Configuration will be updated if the application configuration version is different to that in the local configuration file.</p>
<p>An example configuration file is illustrated below.</p>   
<br>
<br>  
<img src="configJson.png" alt="Configuration data">
<br>

<p>In the configuration file as illustrated above, the only parameter that should be updated by the user as not part of the default configuration is parameter <font color="#2a6099"><i>MyHandle</i></font>.
  This is the name shown in conversations for messages by the used.
  If this parameter is left blank (the default) the user will be prompted to update it.</p>   
<p>All other parameters include default values and are provided to customise some functionality, for example:
  The rendering of messages in conversations, or default behaviour related to the inclusion of passwords when embedding data into images.</p>   
  
<a id="Logging"></a>
<h2>Logging</h2>

<p>The application uses standard Python logging that is started automatically on application start.
  Standard functionality of rotating log files is performed with the number and size of log files specified in configuration data.
  Additionally, the logging level can be specified in configuration data.</p>
<p>Log files are called <font color="#2a6099"><i>picCoder.log</i></font>, with rotated log files called <font color="#2a6099"><i>picCoder.log.1</i></font> etc.</p>
<p>Log entries include the time, log level, and log detail as illustrated in the snippet below.</p>
  <br>
  <br>  
  <img src="logData.png" alt="Log file data">
  <br>

</body>
</html>
